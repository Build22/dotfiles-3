" Commant-T - File opener with fuzzy path matching

Bundle "wincent/Command-T"

" Need to run make process from within vim to link against correct
" ruby version (system, same as mac version) make
" Ref wildignore setting above for filtering, relative path setting
let g:CommandTCancelMap='<C-space>'
let g:CommandTMatchWindowAtTop=1

function! Command_T_Local()
    let cdup = Git_Repo_Cdup()
    if cdup != ''
        " Move working dir to root of repo, then CommandT
        execute ":cd " . cdup
        CommandTFlush
        CommandT
    else
        " Not in a git repo, default to ~/code
        call Command_T_Work()
    endif
endfunction
function! Command_T_Work() "Go from the ~/code repo
    cd ~/code
    CommandT
endfunction

nmap <LEADER>fow :call Command_T_Work()<CR>
nmap <LEADER>fop :call Command_T_Local()<CR>
nmap <leader>gv :call CD_Git_Root()<cr>\|:CommandT app/views<cr>
nmap <leader>gc :call CD_Git_Root()<cr>\|:CommandT app/controllers<cr>
nmap <leader>gm :call CD_Git_Root()<cr>\|:CommandT app/models<cr>
nmap <leader>gj :call CD_Git_Root()<cr>\|:CommandT app/assets/javascripts<cr>
nmap <leader>gy :call CD_Git_Root()<cr>\|:CommandT app/assets/stylesheets<cr>
nmap <leader>gs :call CD_Git_Root()<cr>\|:CommandT spec<cr>
nmap <leader>gt :call CD_Git_Root()<cr>\|:CommandT app/assets/templates<cr>
nmap <leader>gl :call CD_Git_Root()<cr>\|:CommandT app/lib<cr>
nmap <LEADER>ctb :CommandTBuffer<CR>
nmap <LEADER>ctf :CommandTFlush<CR>

nmap <LEADER>rf :CommandT /Users/nation/.vim/rcfiles<cr>
nmap <LEADER>rp :CommandT /Users/nation/.vim/rcplugins<cr>

" vim:ft=vim
