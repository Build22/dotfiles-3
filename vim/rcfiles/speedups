" Speedup configurations
"------------------------

" Quick toggle between two files
nnoremap <leader><leader> <C-^>

" I have almost no need for semicolons, but command mode I need
nnoremap ; :
vnoremap ; :
cnoremap ; :

" Use j/k to start, then scroll through autocomplete options
inoremap <expr> <C-j> ((pumvisible())?("\<C-n>"):("\<C-x><c-i>"))
inoremap <expr> <C-k> ((pumvisible())?("\<C-p>"):("\<C-x><c-o>"))

" For reformatting files.
nmap <leader>gq maggVGgq`a

" Do not use <Ctrl-c> to break out to normal mode
" Use C-Space to Esc out of any mode
nnoremap <C-Space> <Esc>:noh<CR>
vnoremap <C-Space> <Esc>gV
onoremap <C-Space> <Esc>
cnoremap <C-Space> <C-c>
inoremap <C-Space> <Esc>`^
" Terminal sees <C-@> as <C-space> WTF, but ok
nnoremap <C-@> <Esc>:noh<CR>
vnoremap <C-@> <Esc>gV
onoremap <C-@> <Esc>
cnoremap <C-@> <C-c>
inoremap <C-@> <Esc>`^

" Setup nice command tab completion
set wildmenu
set wildmode=list:longest,full
set wildignore+=*.pyc

" Easy re-sourcing of vimrc
map <leader>sop :source %<cr>

" Easy navigation for editing and cding
nmap <Leader>ec :e ~/code/
nmap <Leader>eh :e ~/
nmap <Leader>cd :cd ~/code/
nmap <Leader>er :e <C-r>=expand("%:p:h")<cr>/
nmap <leader>sav :sav <C-r>=expand("%:p:h")<cr>/

"Make Y yank to end of line (like D, or C)
nmap Y y$

" Easy access to the start of the line
nnoremap 0 ^

" Quickly open a second window to view files side by side
nmap <LEADER>vn :vnew<CR><C-w>=

" Move one line at a time, aka 'fine ajdustment'
nnoremap j gj
nnoremap k gk

" Reselect pasted text. Mnem: 'Get pasted'
nnoremap gp `[v`]

" Go to position of last edit. Mnem: 'Go to Edit'
nnoremap ge `.

function! s:RefreshBrowser()
  let activate_cmd = "'tell app \"Google Chrome\" to activate'"
  let reload_cmd = "'tell app \"System Events\" to keystroke \"r\" using {command down}'"
  call s:CallOsascript(activate_cmd)
  call s:CallOsascript(reload_cmd)
endfunction

function! s:CallOsascript(cmd)
  let cmd_prefix = 'osascript -e'
  let full_command = join([cmd_prefix, a:cmd])
  call system(full_command)
endfunction
command! RefreshBrowser call <SID>RefreshBrowser()
nmap <leader>rb :RefreshBrowser<cr>

" vim:ft=vim
