" Node configurations
"------------------------

MapTargetedCtrlp gt app/assets/templates
MapTargetedCtrlp gs test
MapTargetedCtrlp gg config

function! s:RunFocusedMochaTest()
  let spec_title_pattern = '\v^\s+%(scenario|it)\(''(.*)'''
  let scenario_line = search(spec_title_pattern, 'bcn')
  let scenario = matchlist(getline(scenario_line), spec_title_pattern)[1]
  let spec_run_cmd = 'mocha --grep ''' . scenario . ''''
  call VtrSendCommand(spec_run_cmd)
endfunction
command! RunFocusedMochaTest :call <sid>RunFocusedMochaTest()

autocmd Filetype javascript setlocal textwidth=80

nnoremap <leader>t :RunFocusedMochaTest<cr>

" vim:ft=vim
